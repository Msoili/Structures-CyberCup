<!-- Remplacer le tableau existant dans Comores.html par : -->
<main class="container">
  <div class="table-wrap">
    <table>
      <caption>Liste des structures</caption>
      <thead>
      <tr>
        <th>Structure</th>
        <th>Email</th>
        <th>Contact</th>
      </tr>
      </thead>
      <tbody id="region-data">
      <!-- Les données seront chargées ici dynamiquement -->
      <tr>
        <td colspan="3">Chargement des données...</td>
      </tr>
      </tbody>
    </table>
  </div>
</main>

<!-- Ajoutez ce script AVANT </body> -->
<script>
  document.addEventListener('DOMContentLoaded', async () => {
    const apiUrl = 'https://sheetdb.io/api/v1/64fqb9d7ilv65';

    try {
      // 1. Récupérer toutes les données
      const response = await fetch(apiUrl);
      const allData = await response.json();

      // 2. Filtrer pour Comores seulement
      const comoresData = allData.filter(item =>
              item.Région && item.Région.toLowerCase().includes('comores')
      );

      // 3. Afficher dans le tableau
      const tableBody = document.getElementById('comores-data');
      tableBody.innerHTML = '';

      comoresData.forEach(structure => {
        const row = document.createElement('tr');

        row.innerHTML = `
        <td>${structure.Structure || ''}</td>
        <td>${structure.Email || ''}</td>
        <td>${structure.Contact || ''}</td>
      `;

        tableBody.appendChild(row);
      });

      // 4. Si aucune donnée
      if (comoresData.length === 0) {
        tableBody.innerHTML = `
        <tr>
          <td colspan="3">Aucune structure trouvée pour Comores</td>
        </tr>
      `;
      }

    } catch (error) {
      console.error('Erreur:', error);
      document.getElementById('comores-data').innerHTML = `
      <tr>
        <td colspan="3" style="color: red;">Erreur de chargement des données</td>
      </tr>
    `;
    }
  });
</script>