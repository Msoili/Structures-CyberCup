<!DOCTYPE html>
<html lang="fr">
<head>
  
  <meta charset="UTF-8">
  <title>CyberCup Océan Indien 2026</title>
  <style>
    table {
      border-collapse: collapse;
      width: 80%;
      margin: 20px auto;
    }
    th, td {
      border: 1px solid #333;
      padding: 8px;
      text-align: center;
    }
    button {
      margin: 5px;
      padding: 5px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2 style="text-align:center;">CyberCup Océan Indien 2026</h2>

  <table id="annuaire">
    <thead>
      <tr>
        <th>Structure</th>
        <th>Email</th>
        <th>Contact</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Les lignes ajoutées apparaîtront ici -->
    </tbody>
  </table>

  <div style="text-align:center;">
    <button onclick="ajouterLigne()">Ajouter une entrée</button>
  </div>

  <script>
    // Charger les données sauvegardées au démarrage
    window.onload = function() {
      let data = JSON.parse(localStorage.getItem("annuaireData")) || [];
      data.forEach(item => ajouterLigne(item.structure, item.email, item.contact, false));
    };

    function ajouterLigne(structure, email, contact, save = true) {
      if(!structure && !email && !contact) {
        structure = prompt("Nom de la structure :") || "";
        email = prompt("Email officiel :") || "";
        contact = prompt("Nom du contact :") || "";
      }

      let tableau = document.getElementById("annuaire").getElementsByTagName("tbody")[0];
      let ligne = tableau.insertRow();

      ligne.insertCell(0).innerText = structure;
      ligne.insertCell(1).innerText = email;
      ligne.insertCell(2).innerText = contact;

      // Cellule Actions
      let cellAction = ligne.insertCell(3);

      // Bouton Modifier
      let btnModifier = document.createElement("button");
      btnModifier.innerText = "Modifier";
      btnModifier.onclick = function() {
        let newStructure = prompt("Modifier la structure :", ligne.cells[0].innerText) || ligne.cells[0].innerText;
        let newEmail = prompt("Modifier l'email :", ligne.cells[1].innerText) || ligne.cells[1].innerText;
        let newContact = prompt("Modifier le contact :", ligne.cells[2].innerText) || ligne.cells[2].innerText;

        ligne.cells[0].innerText = newStructure;
        ligne.cells[1].innerText = newEmail;
        ligne.cells[2].innerText = newContact;
        sauvegarder();
      };
      cellAction.appendChild(btnModifier);

      // Bouton Supprimer
      let btnSupprimer = document.createElement("button");
      btnSupprimer.innerText = "Supprimer";
      btnSupprimer.onclick = function() {
        tableau.deleteRow(ligne.rowIndex - 1);
        sauvegarder();
      };
      cellAction.appendChild(btnSupprimer);

      if(save) sauvegarder();
    }

    // Sauvegarder toutes les lignes dans LocalStorage
    function sauvegarder() {
      let tableau = document.getElementById("annuaire").getElementsByTagName("tbody")[0];
      let data = [];
      for(let i=0; i<tableau.rows.length; i++) {
        let row = tableau.rows[i];
        data.push({
          structure: row.cells[0].innerText,
          email: row.cells[1].innerText,
          contact: row.cells[2].innerText
        });
      }
      localStorage.setItem("annuaireData", JSON.stringify(data));
    }
  </script>
</body>
</html>